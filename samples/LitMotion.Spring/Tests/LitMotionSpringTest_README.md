# LitMotion.Spring 测试工具

## 概述

这个测试工具用于可视化测试LitMotion.Spring功能的各种配置，包括：

- 1D、2D、3D、4D Spring动画测试
- 循环设置测试（无循环、无限循环、循环2次、循环3次）
- 延迟设置测试（无延迟、延迟2秒、自定义延迟）
- 性能测试

## 使用方法

### 1. 自动设置UI

1. 在场景中创建一个空的GameObject
2. 添加 `LitMotionSpringTestUISetup` 组件
3. 在Inspector中勾选 `autoSetupOnStart` 和 `createUIFromScratch`
4. 运行游戏，UI会自动创建

### 2. 手动设置UI

1. 在场景中创建一个空的GameObject
2. 添加 `LitMotionSpringTestUI` 组件
3. 手动分配所有UI引用

## 测试功能

### 控制面板

- **时间缩放**: 控制整体动画播放速度
- **阻尼比**: 控制Spring动画的阻尼特性（0.1-2.0）
- **刚度**: 控制Spring动画的刚度（1-20）
- **目标值**: 设置Spring动画的目标值（0-1）
- **延迟时间**: 设置动画延迟时间（0-3秒）
- **循环类型**: 选择循环模式
- **延迟类型**: 选择延迟模式

### 测试区域

#### 1D Spring测试
- 测试单精度浮点数的Spring动画
- 显示动画收敛过程

#### 2D Spring测试
- 测试Vector2的Spring动画
- 显示X分量的动画过程

#### 3D Spring测试
- 测试Vector3的Spring动画
- 显示X分量的动画过程

#### 4D Spring测试
- 测试Vector4的Spring动画
- 显示X分量的动画过程

#### 性能测试
- 创建1000个Spring动画进行性能测试
- 显示测试进度

## 测试场景

### 循环测试
1. **无循环**: 动画播放一次后停止
2. **无限循环**: 动画无限循环播放
3. **循环2次**: 动画循环播放2次
4. **循环3次**: 动画循环播放3次

### 延迟测试
1. **无延迟**: 动画立即开始
2. **延迟2秒**: 动画延迟2秒后开始
3. **自定义延迟**: 使用滑块设置延迟时间

### 参数测试
1. **阻尼比测试**: 测试不同阻尼比的效果
   - 0.1-0.9: 欠阻尼（振荡）
   - 1.0: 临界阻尼（最快收敛）
   - 1.1-2.0: 过阻尼（缓慢收敛）

2. **刚度测试**: 测试不同刚度的影响
   - 低刚度: 缓慢收敛
   - 高刚度: 快速收敛

## 预期行为

### Spring动画特性
- **收敛性**: 动画应该逐渐收敛到目标值
- **平滑性**: 动画过程应该平滑，没有突变
- **物理性**: 动画应该符合物理规律

### 循环行为
- **无循环**: 动画播放一次后停止
- **无限循环**: 动画持续循环
- **有限循环**: 动画循环指定次数后停止

### 延迟行为
- **无延迟**: 动画立即开始
- **有延迟**: 动画在指定时间后开始

## 故障排除

### 常见问题

1. **UI引用未分配**
   - 检查 `CheckUIReferences()` 方法
   - 确保所有UI元素正确创建

2. **动画不播放**
   - 检查参数设置
   - 确保目标值与当前值不同

3. **性能问题**
   - 减少同时运行的动画数量
   - 调整时间缩放

### 调试方法

1. **查看控制台输出**
   - 动画开始时会输出调试信息
   - 性能测试会显示创建数量

2. **使用Context Menu**
   - 右键点击组件查看测试选项
   - 可以单独测试各种功能

## 扩展功能

### 自定义测试
- 可以修改测试参数
- 可以添加新的测试场景

### 性能优化
- 可以调整测试数量
- 可以添加性能监控

## 注意事项

1. **内存使用**: 大量动画可能消耗较多内存
2. **性能影响**: 同时运行多个动画可能影响性能
3. **UI响应**: 确保UI元素正确分配引用

## 技术细节

### 使用的LitMotion API
- `LMotion.Spring.Create()`: 创建Spring动画
- `WithLoops()`: 设置循环
- `WithDelay()`: 设置延迟
- `Bind()`: 绑定到UI元素

### Spring选项
- `DampingRatio`: 阻尼比
- `Stiffness`: 刚度
- `TargetValue`: 目标值
- `TargetVelocity`: 目标速度

这个测试工具可以帮助验证LitMotion.Spring功能的正确性和性能表现。
